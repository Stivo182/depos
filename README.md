# depos

**depos** - это инструмент для обновления зависимостей пакетов OneScript до актуальных версий в файле `packagedef`.

- Модифицируется _только_ файл `packagedef`. Для обновления пакетов надо запустить `opm install`.
- Обновление до _последней_, _минорной_ или _патч_-версии.
- Фильтрация пакетов по имени, маске и регулярному выражению.

## Использование

### Проверка последних версий зависимостей проекта

```bash
$ depos check
Проверка зависимостей в path/to/packagedef

 1connector         2.3.1 → 2.3.3
 autumn             3.3.0 → 4.3.11
 autumn-cli         1.1.0 → 1.2.0
 semver             1.0.0 → 1.0.0
```

### Обновление версий зависимостей в файле `packagedef`

> [!CAUTION]
> Убедитесь, что файл `packagedef` находится в системе контроля версий, и все изменения зафиксированы. Это действие перезапишет ваш файл.

```bash
$ depos upgrade
Обновление зависимостей в path/to/packagedef

 1connector         2.3.1 → 2.3.3
 autumn             3.3.0 → 4.3.11
 autumn-cli         1.1.0 → 1.2.0
 
Выполните opm install для установки новых версий пакетов.

$ opm install # Обновление установленных пакетов
```

## Команды

### check 

Проверяет доступные обновления для зависимостей проекта без внесения изменений в файл `packagedef`.

**Синтаксис:**
```bash
depos check [--packagedef <путь>] [-d|--deprecated] [-f|--filter <фильтр>] [-t|--target <тип>]
```

| Опция | Описание |
| --- | --- |
| --packagedef | Путь к файлу packagedef (по умолчанию ищет в текущем каталоге) |
| -d --deprecated | Фильтровать по устаревшим пакетам. |
| -f --filter | Имена пакетов через запятую или пробел, маска (поддерживает * и ?) или регулярное выражение.<br>Примеры:<br> `depos check -f autumn,oint`<br>`depos check -f 'autumn oint'` <br> `depos check -f autumn-*` <br> `depos check -f '/^autumn-(.*)$/'` |
| -t --target | Тип целевой версии пакета (по умолчанию `latest`). <br>Доступные значения: <br>`latest` - последняя доступная версия пакета<br>`minor` - последняя минорная или патч-версия в пределах основной версии<br>`patch` - последняя патч-версия в пределах минорной версии |

### upgrade 

Обновляет версии зависимостей в файле `packagedef` до указанных целевых версий.

**Синтаксис:**
```bash
depos upgrade [--packagedef <путь>] [--backup] [-f|--filter <фильтр>] [-t|--target <тип>]
```

| Опция | Описание |
| --- | --- |
| --packagedef | Путь к файлу packagedef (по умолчанию ищет в текущем каталоге) |
| --backup | Сохранять резервную копию файла манифеста |
| -f --filter | Имена пакетов через запятую или пробел, маска (поддерживает * и ?) или регулярное выражение.<br>Примеры:<br> `depos upgrade -f autumn,oint`<br>`depos upgrade -f 'autumn oint'<br>`depos upgrade -f autumn-*` <br> `depos upgrade -f '/^autumn-(.*)$/'` |
| -t --target | Тип целевой версии пакета (по умолчанию `latest`). <br>Доступные значения: <br>`latest` - последняя доступная версия пакета<br>`minor` - последняя минорная или патч-версия в пределах основной версии<br>`patch` - последняя патч-версия в пределах минорной версии |